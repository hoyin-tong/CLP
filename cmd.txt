set DB_URI=localhost
set DB_NAME=userapi
set DB_USERNAME=userapi
set DB_PASSWORD=userapi
npm start


set DB_URI=localhost
set DB_NAME=userapi
set DB_USERNAME=userapi
set DB_PASSWORD=userapi
npm test



docker build -t device-api:0.1 .

docker run -d --rm -p4000:3000 --name device-api  -e DB_URI=127.0.0.1 -e DB_NAME=userapi -e DB_USERNAME=userapi -e DB_PASSWORD=userapi device-api:0.1 


docker run -d --rm -p42333:3306 --name device-mysql -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=userapi -e MYSQL_USER=userapi -e MYSQL_PASSWORD=userapi mysql:8.0

docker exec -it device-mysql mysql -uroot -p

docker-compose -f dockercompose-device-api.yaml up

# set minikube to get local image
eval $(minikube docker-env)             # unix shells
minikube docker-env | Invoke-Expression # PowerShell

kubectl create namespace device-api-env
kubectl apply -f db-secret.yaml
kubectl apply -f db-config.yaml
kubectl apply -f deployment-db.yaml
kubectl apply -f deployment-device-api.yaml

kubectl delete -f deployment-device-api.yaml

kubectl get pods -n device-api-env

# get ip of minikube
minikube ip
kubectl get node -o wide

kubectl logs device-api-deploy-6c748b896b-j4dxz -n device-api-env

kubectl exec  -n device-api-env -it device-api-deploy-6665486786-qst62 -- bin/bash

kubectl describe pod device-api-deploy -n device-api-env